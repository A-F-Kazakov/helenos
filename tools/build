#! /bin/sh

function syntax {
	echo "Syntax:"
	echo " build "
	echo
}

ARGS=""
while [ "$#" -gt 0 ]; do
	case "$1" in
		*)
			syntax
			exit 1
			;;
	esac
	shift
done

TAG="`svnversion . 2> /dev/null`"
TIMESTAMP="`date "+%Y-%m-%d %H:%M:%S" 2> /dev/null`"
if [ -z "$TAG" ] || [ "$TAG" == "exported" ]; then
	TAG="Built on $TIMESTAMP for $ARCH"
else
	TAG="Revision $TAG (built on $TIMESTAMP for $ARCH)"
fi

tools/config.py default
make all "TAG=$TAG" $ARGS
